@inherits LayoutComponentBase
@inject IAuthService AuthService
@inject NavigationManager NavigationManager

<SfToolbar CssClass="e-bootstrap5">
    <ToolbarItems>
        <ToolbarItem PrefixIcon="" Text="">
            <Template>
                <a class="navbar-brand" href="/">
                    <img src="logo.png" alt="Logo" style="height:40px" class="me-2" />
                </a>
            </Template>
        </ToolbarItem>
        <ToolbarItem Text="Menu">
            <Template>
                <SfMenu Items="MenuItems" CssClass="e-bootstrap5"></SfMenu>
            </Template>
        </ToolbarItem>
        <ToolbarItem Align="ItemAlign.Right">
            <Template>
                <AuthorizeView>
                    <Authorized>
                        <SfButton CssClass="e-primary" OnClick="Logout">Logout</SfButton>
                    </Authorized>
                    <NotAuthorized>
                        <SfButton CssClass="e-primary" @onclick='() => NavigationManager.NavigateTo("login")'>Login</SfButton>
                    </NotAuthorized>
                </AuthorizeView>
            </Template>
        </ToolbarItem>
    </ToolbarItems>
</SfToolbar>

<div class="content p-4">
    @Body
</div>

<footer class="bg-light text-center py-3">
    &copy; 2025 Госуслуги
</footer>

@code {
    List<MenuItem> MenuItems = new()
    {
        new MenuItem { Text = "Services", Url = "/services" },
        new MenuItem { Text = "Workflows", Url = "/workflows" },
        new MenuItem { Text = "Applications", Url = "/applications" },
        new MenuItem { Text = "Documents", Url = "/documents/0" },
        new MenuItem { Text = "Templates", Url = "/templates" },
        new MenuItem { Text = "Users", Url = "/users" }
    };

    private async Task Logout()
    {
        await AuthService.LogoutAsync();
    }
}
