@inject NavigationManager Nav
@inject IAuthService AuthService

<AuthorizeView>
    <Authorized>
        <MudAppBar Color="Color.Primary">
            <MudToolbar>
                <a href="/" class="d-flex align-items-center text-decoration-none me-4">
                    <span class="h3 mb-0 me-2">üèõÔ∏è</span>
                    <span class="fw-semibold h5 mb-0">–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏</span>
                </a>
                <MudMenu Label="üìÑ –ó–∞—è–≤–ª–µ–Ω–∏—è" StartIcon="@Icons.Material.Filled.Description">
                    <MudMenuItem Href="/applications">–í—Å–µ –∑–∞—è–≤–ª–µ–Ω–∏—è</MudMenuItem>
                    <MudMenuItem Href="/registry/applications">–†–µ–µ—Å—Ç—Ä</MudMenuItem>
                    <MudMenuItem Href="/registry/rdz-orders">–†–î–ó</MudMenuItem>
                    <MudMenuItem Href="/registry/rdi-orders">–†–î–ò</MudMenuItem>
                </MudMenu>
                <MudMenu Label="üìë –î–æ–∫—É–º–µ–Ω—Ç—ã" StartIcon="@Icons.Material.Filled.Folder">
                    <MudMenuItem Href="/registry/contracts">–î–æ–≥–æ–≤–æ—Ä—ã</MudMenuItem>
                    <MudMenuItem Href="/registry/acts">–ê–∫—Ç—ã</MudMenuItem>
                    <MudMenuItem Href="/registry/agreements">–°–æ–≥–ª–∞—à–µ–Ω–∏—è</MudMenuItem>
                </MudMenu>
                <MudMenu Label="üìö –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏" StartIcon="@Icons.Material.Filled.MenuBook">
                    <MudMenuItem Href="/dictionaries">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏</MudMenuItem>
                    <MudMenuItem Href="/templates">–®–∞–±–ª–æ–Ω—ã</MudMenuItem>
                    <MudMenuItem Href="/service-templates">–®–∞–±–ª–æ–Ω—ã —É—Å–ª—É–≥</MudMenuItem>
                </MudMenu>
                <MudMenu Label="üè¢ –°—Ç—Ä—É–∫—Ç—É—Ä–∞" StartIcon="@Icons.Material.Filled.Apartment">
                    <MudMenuItem Href="/departments">–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è</MudMenuItem>
                    <MudMenuItem Href="/positions">–î–æ–ª–∂–Ω–æ—Å—Ç–∏</MudMenuItem>
                </MudMenu>
                <MudMenu Label="üó∫ –ì–µ–æ" StartIcon="@Icons.Material.Filled.Map">
                    <MudMenuItem Href="/geoobjects">–ì–µ–æ–æ–±—ä–µ–∫—Ç—ã</MudMenuItem>
                </MudMenu>
                <MudMenu Label="üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ä–æ–ª–∏" StartIcon="@Icons.Material.Filled.People">
                    <MudMenuItem Href="/users">–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</MudMenuItem>
                    <MudMenuItem Href="/roles">–†–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø</MudMenuItem>
                </MudMenu>
                <MudMenu Label="‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏" StartIcon="@Icons.Material.Filled.Settings">
                    <MudMenuItem Href="/settings">–û–±—â–∏–µ</MudMenuItem>
                    <MudMenuItem Href="/settings/integrations">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</MudMenuItem>
                </MudMenu>
                <MudMenu Label="üìä –û—Ç—á—ë—Ç—ã" StartIcon="@Icons.Material.Filled.BarChart">
                    <MudMenuItem Href="/reports/stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</MudMenuItem>
                    <MudMenuItem Href="/reports/export">–í—ã–≥—Ä—É–∑–∫–∏</MudMenuItem>
                </MudMenu>
                <MudMenu Label="ü§ñ –ò–ò" StartIcon="@Icons.Material.Filled.SmartToy">
                    <MudMenuItem Href="/ai">–ú–æ–¥–µ–ª—å –ò–ò</MudMenuItem>
                    <MudMenuItem Href="/ai/settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ò–ò</MudMenuItem>
                </MudMenu>
                <MudSpacer />
                <MudMenu Icon="@Icons.Material.Filled.AccountCircle">
                    <MudMenuItem OnClick="Profile">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</MudMenuItem>
                    <MudMenuItem OnClick="Logout">–í—ã—Ö–æ–¥</MudMenuItem>
                </MudMenu>
            </MudToolbar>
        </MudAppBar>
    </Authorized>
    <NotAuthorized>
        <MudAppBar Color="Color.Primary">
            <MudToolbar Class="justify-end">
                <MudButton Color="Color.Primary" OnClick="@(() => Nav.NavigateTo("/login"))">–í–æ–π—Ç–∏</MudButton>
            </MudToolbar>
        </MudAppBar>
    </NotAuthorized>
</AuthorizeView>

@code {
    private async Task Logout()
    {
        await AuthService.LogoutAsync();
        Nav.NavigateTo("/login", true);
    }

    private void Profile() => Nav.NavigateTo("/profile");
}
