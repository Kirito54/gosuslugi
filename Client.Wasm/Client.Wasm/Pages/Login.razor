@page "/login"
@inject AuthService AuthService
@using Client.Wasm.DTOs
@inject IJSRuntime Js
@inject NavigationManager NavigationManager
@using System.ComponentModel.DataAnnotations

<div class="container d-flex justify-content-center align-items-center" style="height:80vh;">
    <div class="card shadow-sm" style="width: 400px;">
        <div class="card-header text-center">
            <h2>Вход в систему</h2>
        </div>
        <div class="card-body">
            <EditForm Model="@model" OnValidSubmit="HandleLogin">
                <DataAnnotationsValidator />
                <ValidationSummary />
                <InputText class="form-control mb-3" @bind-Value="model.Email" placeholder="Email" />
                <InputText class="form-control mb-4" @bind-Value="model.Password" type="password" placeholder="Пароль" />
                <button type="submit" class="btn btn-primary w-100">Войти</button>
            </EditForm>
        </div>
    </div>
</div>

@code {
    LoginRequestDto model = new();
    async Task HandleLogin()
    {
        await AuthService.LoginAsync(model);
        NavigationManager.NavigateTo("/");
    }
}
