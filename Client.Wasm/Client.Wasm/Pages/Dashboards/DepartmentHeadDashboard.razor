@page "/dashboard/department"
@attribute [Authorize(Roles="Начальник отдела")]
@inject NavigationManager Nav

<div class="container p-4">
    <h1 class="mb-4">Дашборд начальника отдела</h1>
    <div class="row g-4">
        <div class="col-md-4 col-sm-6">
            <MudCard Class="rounded-xl shadow-lg glass-effect p-6 text-center">
                <MudCardHeader>
                    <h4>Активные заявления</h4>
                </MudCardHeader>
                <MudCardContent>
                    <h2 class="display-6">@activeApps</h2>
                </MudCardContent>
            </MudCard>
        </div>
        <div class="col-md-4 col-sm-6">
            <MudCard Class="rounded-xl shadow-lg glass-effect p-6 text-center">
                <MudCardHeader>
                    <h4>Сотрудники</h4>
                </MudCardHeader>
                <MudCardContent>
                    <h2 class="display-6">@employees</h2>
                </MudCardContent>
            </MudCard>
        </div>
        <div class="col-md-4 col-sm-6">
            <MudCard Class="rounded-xl shadow-lg glass-effect p-6 text-center">
                <MudCardHeader>
                    <h4>Просроченные</h4>
                </MudCardHeader>
                <MudCardContent>
                    <h2 class="display-6">@overdue</h2>
                </MudCardContent>
            </MudCard>
        </div>
    </div>

    <div class="row g-4 mt-4">
        <div class="col-12">
            @* TODO: заменить на MudBlazor график по специалистам *@
        </div>
    </div>
</div>

@code {
    int activeApps = 42;
    int employees = 6;
    int overdue = 3;

    List<UserCount> appsByUser = new()
    {
        new UserCount("Иванов", 10),
        new UserCount("Петров", 15),
        new UserCount("Сидоров", 17)
    };

    // TODO: заменить на MudBlazor обработчик клика по точке графика

    record UserCount(string User, int Count);
}
