@attribute [Authorize]
@page "/documents/{applicationId:int}"
@inject IDocumentApiClient ApiClient
@using Client.Wasm.DTOs
@inject IJSRuntime Js
@inject NavigationManager NavigationManager

<div class="container p-4">
    <SfCard CssClass="mb-4">
        <CardHeader>
            <h1>Документы</h1>
        </CardHeader>
        <CardContent>
            <SfGrid DataSource="@docs" AllowPaging="true" CssClass="e-bootstrap5">
            <GridPageSettings PageSize="10" />
            <GridColumns>
                <GridColumn Field=@nameof(DocumentDto.Id) HeaderText="ID" Width="70" TextAlign="TextAlign.Center" />
                <GridColumn Field=@nameof(DocumentDto.FileName) HeaderText="Файл" Width="200" />
                <GridColumn Field=@nameof(DocumentDto.UploadedAt) HeaderText="Загружен" Format="d" Width="120" />
            </GridColumns>
            </SfGrid>
        </CardContent>
    </SfCard>
</div>

@code {
    [Parameter] public int applicationId { get; set; }
    List<DocumentDto> docs = new();

    protected override async Task OnParametersSetAsync()
    {
        docs = await ApiClient.GetByApplicationIdAsync(applicationId);
    }
}
